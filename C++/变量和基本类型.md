# 变量和基本类型

- C++定义了一套包括算术类型(arithmetic type)和空类型(void)在内的基本数据类型.

    - 算术类型包含字符、整型、布尔值和浮点数.

    - 空类型不对应具体的值，仅用于一些特殊的场合.

---

### 1.算术类型

- 算术类型分类两类：整型(integral type，包括字符和布尔类型在内)和浮点型

#### C++算术类型
| 类型 | 含义 | 最小尺寸 |
|:--:|:--:|:--:|
| bool | 布尔类型 | 未定义 |
| char | 字符 | 8位 |
| wchar_t | 宽字符 | 16位 |
| char16_t | Unicode字符 | 16位 |
| char32_t | Unicode字符 | 32位 |
| short | 短整型 | 16位 |
| int | 整型 | 16位 |
| long | 长整型 | 32位 |
| long long | 长整型 | 64位 |
| float | 单精度浮点数 | 6位有效数字 |
| double | 双精度浮点数 | 10位有效数字 |
| long double | 扩展精度浮点数 | 10位有效数字 |

- 布尔类型(bool)取值为true或者false

- C++提供了几种字符类型,其中多数支持国际化.

- 基本的字符类型是char,一个char的空间应该确保可以存放机器基本字符集中任意字符对应的数字值,也就是说,一个char的大小和一个机器字节一样.

- 其他字符类型用于扩展字符集,如wchar_t,char16_t,char32_t,wchar_t类型用于确保可以存放机器最大扩展字符集中的任意一个字符,类型char16_t和char32_t则为Unicode字符集服务(Unicode是用于表示所有自然语言中字符的标准.)

- 除字符和布尔类型之外,其他整型用于表示(可能)不同尺寸的整数.C++语言规定一个int至少和一个short一样大,一个long至少和一个int一样大,一个long long至少和一个long一样大,其中,数据类型long long是在c++11中新定义的.

- 浮点型可表示单精度,双精度和扩展精度值.C++标准指定了一个浮点数有效位数的最小值,然而大多数编译器都实现了更高的精度.通常,float以1个字节(32比特)来表示,double以2个字节(64比特)来表示,long long以3或者4个字节(96或128比特)来表示.一般来说,类型float和double分别有7和16个有效位,类型long double则尝尝被用于有特殊浮点需求的硬件.它的具体实现不同,精度也各不相同.

#### 带符号类型和无符号类型

- 除去布尔值和扩展的字符类型之外,其他整型可以划分为带符号的(signed)和无符号(unsigned)两种.带符号类型可以表示正数,负数或0,无符号类型仅能表示大于等于0的值.

- 类型int,short,long和long long都是带符号的,通过在这些类型名前添加unsigned就可以得到无符号类型.

- 与其他整型不同,字符型被分为了三种,char,signed char和unsigned char,特别需要注意的是,类型char和类型signed char并不一样.尽管字符型有三种,但是字符的表现形式却有两种,带符号的和无符号的.类型char实际上会表现为上述两种形式中的一种,具体是哪种由编译器决定

- 无符号类型中所有比特都用来存储值.

- C++标准中并没有规定带符号类型应如何表示,但是约定了在表示范围内正值和负值的量应该平衡.因此,8比特的signed char理论上应该可以表示-127至127区间内的值,大多数现代计算机将实际的表示范围定位-128至127.

### 在C++中,初始化和赋值是两个完全不同的概念.

    - 初始化的含义是创建变量时赋予其一个初始值.

    - 赋值的含义是把对象的当前值擦除,以一个新的值来替代.

### 默认初始化

- 如果定义变量时没有指定初始值,则变量被默认初始化(default initialized),此时变量被赋予了"默认值".默认值由变量类型决定.

- 如果是内置类型的变来那个未被显式初始化,它的值由定义的位置决定.

    - 定义于任何函数体之外的变量被初始化为0.

    - 一种另外情况是,定义在函数体内部的内置类型变量将不被初始化,一个未被初始化的内置类型变量的值是未定义的,如果试图拷贝或以其他形式访问此类值将引发错误.

    - 每个类各自决定其初始化对象的方式,而且,是否允许未经初始化就定义对象也由类自己决定.如果类允许这种行为,它将决定对象的初始值到底是什么.

### 列表初始化

- 将变量初始化为0

        int a = 0;
        int b = {0};
        int c(0);
        int d{0};

- 作为C++11新标准的一部分,用花括号来初始化变量得到了全面应用.这种初始化的形式被称为列表初始化.

- 当用于内置类型的变量时,这种初始化形式有一个重要的特点: 如果我们使用列表初始化且初始值存在丢失信息的风险,则编译器将报错.

        long double ld=3.1415926536;
        int a{ld},b={ld};   // 错误,转换未执行,因为存在丢失信息的风险
        int c(ld),d=ld;     // 正确,转换执行,且确实丢失了部分值.

- 建议初始化每一个内置类型的变量,虽然并非必须这么做,但如果我们不能确保初始化后程序安全,那么这么做不失为一种简单可靠的方法.

---

### 变量声明和定义的关系

- 为了允许把程序拆分成多个逻辑部分来编写,C++语言支持分离式(separate compilation)编译机制.该机制允许将程序分割为若干个文件,每个文件可被独立编译.

- 如果将程序分为多个文件,则需要有在文件间共享代码的方法.

- 为了支持分离式编译,C++语言将声明和定义区分开来.声明(declaration)使得名字为程序所知,一个文件如果想使用别处定义的名字,则必须包含对那个名字的声明,而定义(definition)负责创建与名字关联的实体.

- 变量声明规定了变量的类型和名字,在这一点上定义与之相同,但是除此之外,定义还申请存储控件,也可能会为变量赋一个初始值.

- 如果想声明一个变量而非定义它,就在变量名钱添加关键字extern,而且不要显式的初始化变量.

        extern int i;   // 声明i而非定义
        int j;          // 声明并定义j
        extern int j=1; // 定义

- 任何包含了显式初始化的声明即成为定义.extern语句如果包含初始值就不再是声明,而变成定义了.

- 变量能且只能定义一次,但是可以被多次声明.

- C++是一种静态类型(statically typed)语言,其含义是在编译阶段检查类型,其中,检查类型的过程称为类型检查(type checking).

#### 变量命名规范

- 标识符要能体现实际含义.

- 变量名一般用小写字母.

- 用户自定义的类名一般以大写字母开头.

- 如果标识符由多个单词组成,则单词间应有明显区分.